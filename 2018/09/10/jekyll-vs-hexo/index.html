<!DOCTYPE html>
<html>
<head>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
<title>Jekyll v.s. Hexo | Ganlv&#39;s Blog</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name="description" content="最近我想用 GitHub Pages 搭建一个静态博客。最先想到的肯定是 Jekyll 了，因为这个东西是 GitHub 官方支持的。 通常来说，被 GitHub 所看中的项目，应该是非常不错的，不过用了之后才会发现一些问题。 这篇文章既包括正常的安装步骤，也包括一些吐槽，从中能发现对两者的一些看法。最后，我选择了使用 Hexo。   Jekyll 快速开始 Quickstart 实际上我的安装过">
<meta name="keywords" content="hexo,node.js,npm,travis,ci,github,pages,jekyll,comparison,ruby,gem">
<meta property="og:type" content="article">
<meta property="og:title" content="Jekyll v.s. Hexo">
<meta property="og:url" content="https://ganlvtech.github.io/2018/09/10/jekyll-vs-hexo/index.html">
<meta property="og:site_name" content="Ganlv&#39;s Blog">
<meta property="og:description" content="最近我想用 GitHub Pages 搭建一个静态博客。最先想到的肯定是 Jekyll 了，因为这个东西是 GitHub 官方支持的。 通常来说，被 GitHub 所看中的项目，应该是非常不错的，不过用了之后才会发现一些问题。 这篇文章既包括正常的安装步骤，也包括一些吐槽，从中能发现对两者的一些看法。最后，我选择了使用 Hexo。   Jekyll 快速开始 Quickstart 实际上我的安装过">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-10-15T21:50:43.548Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jekyll v.s. Hexo">
<meta name="twitter:description" content="最近我想用 GitHub Pages 搭建一个静态博客。最先想到的肯定是 Jekyll 了，因为这个东西是 GitHub 官方支持的。 通常来说，被 GitHub 所看中的项目，应该是非常不错的，不过用了之后才会发现一些问题。 这篇文章既包括正常的安装步骤，也包括一些吐槽，从中能发现对两者的一些看法。最后，我选择了使用 Hexo。   Jekyll 快速开始 Quickstart 实际上我的安装过">
<link rel="alternate" href="/atom.xml" title="Ganlv&#39;s Blog" type="application/atom+xml">
<link rel="icon" href="/favicon.png">
<link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
</html>
<body>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
<div id="wrap">
<header id="header">
<div id="banner"></div>
<div id="header-outer" class="outer">
<div id="header-title" class="inner">
<h1 id="logo-wrap">
<a href="/" id="logo">Ganlv&#39;s Blog</a>
</h1>
</div>
<div id="header-inner" class="inner">
<nav id="main-nav">
<a id="main-nav-toggle" class="nav-icon"></a>
<a class="main-nav-link" href="/">Home</a>
<a class="main-nav-link" href="/archives">Archives</a>
</nav>
<nav id="sub-nav">
<a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
<a id="nav-search-btn" class="nav-icon" title="搜索"></a>
</nav>
<div id="search-form-wrap">
<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://ganlvtech.github.io"></form>
</div>
</div>
</div>
</header>
<div class="outer">
<section id="main"><article id="post-jekyll-vs-hexo" class="article article-type-post" itemscope itemprop="blogPost">
<div class="article-meta">
<a href="/2018/09/10/jekyll-vs-hexo/" class="article-date">
<time datetime="2018-09-10T13:51:47.000Z" itemprop="datePublished">2018-09-10</time>
</a>
</div>
<div class="article-inner">
<header class="article-header">
<h1 class="article-title" itemprop="name">
Jekyll v.s. Hexo
</h1>
</header>
<div class="article-entry" itemprop="articleBody">
<p>最近我想用 <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> 搭建一个静态博客。最先想到的肯定是 <a href="https://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a> 了，因为这个东西是 GitHub 官方支持的。</p>
<p>通常来说，被 GitHub 所看中的项目，应该是非常不错的，不过用了之后才会发现一些问题。</p>
<p>这篇文章既包括正常的安装步骤，也包括一些吐槽，从中能发现对两者的一些看法。最后，我选择了使用 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>。</p>
<div class="toc">
<ul>
<li><a href="#jekyll">Jekyll</a><ul>
<li><a href="#kuai-su-kai-shi-quickstart">快速开始 Quickstart</a></li>
<li><a href="#shi-ji-shang-wo-de-an-zhuang-guo-cheng">实际上我的安装过程</a></li>
<li><a href="#github-pages">GitHub Pages</a></li>
<li><a href="#zhu-ti">主题</a></li>
<li><a href="#xin-jian-wen-zhang">新建文章</a></li>
<li><a href="#gem-bao-ban-ben-chong-tu">Gem 包版本冲突</a></li>
<li><a href="#zui-zhong">最终</a></li>
</ul>
</li>
<li><a href="#tong-lei-chan-pin">同类产品</a></li>
<li><a href="#hexo">Hexo</a><ul>
<li><a href="#an-zhuang">安装</a></li>
<li><a href="#shi-ji-an-zhuang-guo-cheng">实际安装过程</a></li>
<li><a href="#xie-wen-zhang">写文章</a></li>
<li><a href="#github-pages-1">GitHub Pages</a></li>
</ul>
</li>
<li><a href="#zi-dong-gou-jian">自动构建</a><ul>
<li><a href="#cao-zuo-guo-cheng">操作过程</a></li>
<li><a href="#gai-jin-de-zi-dong-bu-shu">改进的自动部署</a></li>
</ul>
</li>
</ul>
</div>
<h2><span id="jekyll">Jekyll</span><a href="#jekyll" class="header-anchor">#</a></h2><p>那么我们按照官网的指示来一步一步操作。</p>
<h3><span id="kuai-su-kai-shi-quickstart">快速开始 Quickstart</span><a href="#kuai-su-kai-shi-quickstart" class="header-anchor">#</a></h3><ol>
<li><p>安装一个完全的 <a href="https://jekyllrb.com/docs/installation/" target="_blank" rel="noopener">Ruby 开发环境</a></p>
</li>
<li><p>安装 <code>Jekyll</code> 和 <code>bundler</code> 的 gem 包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install jekyll bundler</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>./myblog</code> 创建一个新的 Jekyll 网站</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jekyll new myblog</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入新的文件夹中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> myblog</span><br></pre></td></tr></table></figure>
</li>
<li><p>构建网站，使他可以在本地服务器访问</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bundle <span class="built_in">exec</span> jekyll serve</span><br></pre></td></tr></table></figure>
</li>
<li><p>现在可以访问 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 了</p>
</li>
</ol>
<h3><span id="shi-ji-shang-wo-de-an-zhuang-guo-cheng">实际上我的安装过程</span><a href="#shi-ji-shang-wo-de-an-zhuang-guo-cheng" class="header-anchor">#</a></h3><p>我是有 Web 开发基础的，安装软件和通过命令行执行命令都是小事，看上去安装过程很方便，那么我们开始吧。</p>
<p>我在安装软件的时候不喜欢选择经典（Typical）或者完全（Full）通常我会选择自定义（Custom），这样我可以看到他到底做了什么，所以我没有安装快速开始的过程直接安装，而是继续往下看开始章节（GETTING STARTED）中的其他介绍。</p>
<p>Ruby 入门（Ruby 101）这个我就不看了，毕竟我以不打算学 Ruby，我只需要知道怎么操作就行了。</p>
<p>我来看看安装（Installation）的内容。</p>
<blockquote>
<p>Jekyll 是一个可以安装在绝大多数系统的 Ruby Gem 包。</p>
</blockquote>
<p>要求：Ruby、RubyGems、GCC 和 Make。</p>
<ul>
<li>Ruby 和 RubyGems 这两个肯定没有问题，这个肯定是官方支持的。</li>
<li>GCC 是用来干什么的？不过没什么问题，大学里学过 C 语言，电脑里还留着呢（Dev-C++ 的 TDM-GCC 用着还不错）。</li>
<li><strong>为什么还要用到 Make 这种东西？在 Windows 下装 Make 感觉很麻烦啊！</strong></li>
</ul>
<p>暂时先不管，先继续往下看。下面我要看 Windows 下的安装说明。</p>
<blockquote>
<p>虽然 Windows 不是官方支持的平台，但可以通过适当的调整来运行Jekyll。此页面旨在收集 Windows 用户已发现的一些常识和经验教训。</p>
</blockquote>
<p>看到 <strong>不是官方支持</strong> 就感觉有些不想用这个，某些服务器软件官方不支持 Windows，这个我不会评论什么，但是给客户用的，为的是帮助用户解决日常写博客问题的软件，不官方支持 Windows 就有点令人反感了。</p>
<p>自己开的坑，至少研究明白再弃坑，我弄成功之后肯定要换个解决方案。</p>
<blockquote>
<p>运行 Jekyll 最简单的方法就是使用 <a href="https://rubyinstaller.org/" target="_blank" rel="noopener">RubyInstaller</a> for Windows</p>
</blockquote>
<p><strong>用 Installer 来安装其实挺方便的</strong> ，就不用自己配置 PATH 之类的，安装过程基本不会出现什么问题。</p>
<p>不过看到 <code>Ruby+Devkit</code> 版本，我就有点不高兴了。 <strong>我要运行一个 Ruby 的软件，为什么还要安装 Devkit</strong> 。难道不是像 Java 一样分为 JRE 和 JDK，如果只是运行 jar 只用 JRE 就够了？</p>
<p>那就先下载吧 <a href="https://github.com/oneclick/rubyinstaller2/releases/download/rubyinstaller-2.4.4-2/rubyinstaller-devkit-2.4.4-2-x64.exe" target="_blank" rel="noopener">rubyinstaller-devkit-2.4.4-2-x64.exe</a>。竟然要 115 MB，这什么鬼东西啊！Node.js 才 20MB，php 30MB，Chrome 也就 50MB， <strong>我为什么要为了写个博客装一个 115 MB 的东西</strong> 。</p>
<p>然后就安装吧，一路默认选项，反正我已经准备好卸载了。</p>
<p>然后运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install jekyll bundler</span><br></pre></td></tr></table></figure>
<p>然后经过漫长的等待，终于安装好了，国内网还是有点慢的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jekyll new myblog</span><br></pre></td></tr></table></figure>
<p>然后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> myblog</span><br><span class="line">jekyll serve</span><br></pre></td></tr></table></figure>
<p>访问 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a>，终于成功访问了。</p>
<h3><span id="github-pages">GitHub Pages</span><a href="#github-pages" class="header-anchor">#</a></h3><p>GitHub 本身支持 Jekyll，可以自动编译 Jekyll 静态博客，直接按默认的 <code>.gitignore</code> Commit、Push 就行，部署起来应该不麻烦。</p>
<p>我新建了一个名为 <code>ganlvtech.github.io</code> 的仓库，然后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"Initial commit"</span></span><br><span class="line">git remote add origin git@github.com:ganlvtech/ganlvtech.github.io.git</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<p>就行了。</p>
<p>其实我用的是 Git GUI</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git gui</span><br></pre></td></tr></table></figure>
<p>然后就可以到 <a href="https://github.com/ganlvtech/ganlvtech.github.io/settings" target="_blank" rel="noopener">仓库设置</a> 中启用 GitHub Pages，</p>
<p>然后问题就来了，静态页面的 CSS 文件加载不出来，不知道为什么。</p>
<p>我怀疑可能是 GitHub 不支持 minima 这个主题，我尝试修改设置里的“主题”选项，改了之后也没用。</p>
<p>经过一番 Bing 搜索，我找到了 <a href="https://help.github.com/articles/about-github-pages-and-jekyll/#jekyll-site-examples" target="_blank" rel="noopener">About GitHub Pages and Jekyll</a></p>
<blockquote>
<p>We recommend using Jekyll if you want the built-in support it offers, including the <a href="https://github.com/github/pages-gem" target="_blank" rel="noopener">GitHub Pages gem</a> to manage dependencies, specific build failure messages, and more specific help with troubleshooting.</p>
</blockquote>
<p>我就打开 <a href="https://github.com/github/pages-gem" target="_blank" rel="noopener">GitHub Pages gem</a> 这个链接看了一下，也没太看明白</p>
<p>我在 <code>Gemfile</code> 最后添加了一行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem &apos;github-pages&apos;, group: :jekyll_plugins</span><br></pre></td></tr></table></figure>
<p>然后 Commit、Push，果然可以正常访问 <a href="https://ganlvtech.github.io/">https://ganlvtech.github.io/</a> 了。</p>
<h3><span id="zhu-ti">主题</span><a href="#zhu-ti" class="header-anchor">#</a></h3><p>GitHub 官方支持的主题实在不符合我的审美要求，我在 GitHub 全仓库搜索 <code>jekyll</code> 按 Star 排序挨个看，终于找到一个我感觉很舒服的主题，<a href="https://github.com/kaeyleo/jekyll-theme-H2O" target="_blank" rel="noopener">H2O</a>。</p>
<p>浏览过程中我发现，Jekyll 主题的下载方法竟然不是通过包管理器下载，而是手动克隆仓库，相当于把模板和 CSS 文件下载下来。</p>
<p>感觉这种方法有些过时，不过也没有问题，因为自己的博客要有个性化，改 CSS 应该是很常见的问题。</p>
<p>我下载了这个主题，感觉还不错，准备先写篇博客，然后再把主题部署上去吧，要不这个主题可能会显得光秃秃的。</p>
<h3><span id="xin-jian-wen-zhang">新建文章</span><a href="#xin-jian-wen-zhang" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jekyll <span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<p>哇！ <strong>Jekyll 竟然没有自动新建文章的功能</strong> 。</p>
<p>Bing 一下 <code>jekyll new post</code>，结果真的没有，这个根本就不人性化，难道每次我新建文章都得自己输入日期，自己把文件前面的描述复制过来。</p>
<blockquote>
<p>自己选的 Jekyll，死也要把这个东西弄完。</p>
</blockquote>
<h3><span id="gem-bao-ban-ben-chong-tu">Gem 包版本冲突</span><a href="#gem-bao-ban-ben-chong-tu" class="header-anchor">#</a></h3><p>本来以为问题都解决了，我也没怎么多想，我就用 <a href="https://code.visualstudio.com/" target="_blank" rel="noopener">vscode</a> 写了一篇博客，vscode 自带的感觉还不错。想在 Push 之前看看效果，运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jekyll serve --watch</span><br></pre></td></tr></table></figure>
<p>然后就提示问题了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Bundler could not find compatible versions for gem &quot;jekyll&quot;: (Bundler::VersionConflict)</span><br><span class="line">  In Gemfile:</span><br><span class="line">    jekyll (~&gt; 3.8.3) x64-mingw32</span><br><span class="line"></span><br><span class="line">    github-pages x64-mingw32 was resolved to 191, which depends on</span><br><span class="line">      jekyll (= 3.7.3) x64-mingw32</span><br></pre></td></tr></table></figure>
<p><code>github-pages</code> 这个 Gem 包竟然是要求版本完全相等，都不能向以后版本兼容。我都想骂人了，那种“有最新版，然而我不能用”的感觉感觉很不爽，而且还是因为一个对我本地运行无作用的包。</p>
<h3><span id="zui-zhong">最终</span><a href="#zui-zhong" class="header-anchor">#</a></h3><p>我想想就到这里吧，我要去寻找替代品了。</p>
<h2><span id="tong-lei-chan-pin">同类产品</span><a href="#tong-lei-chan-pin" class="header-anchor">#</a></h2><p>搜索一下 <code>Jekyll Alternatives</code>，WordPress 肯定是最多的啦，当然我们要的是静态博客，还有 <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">Hugo</a> 和 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>，对比一下：</p>
<ul>
<li>GitHub 上 Star 数差不多</li>
<li>Hexo 有中文文档，很多贡献者都是中国人</li>
<li>Hexo 之前我听说过</li>
<li>Hugo 有已编译版本，不需要下载 Go 的环境</li>
<li>我对 Node.js npm 比较熟悉</li>
</ul>
<p>由于我对 javascript 还是比较了解的，我想了解一下 Hexo 代码的结构，学习一下其他人代码的写法，所以我选择了 Hexo。</p>
<h2><span id="hexo">Hexo</span><a href="#hexo" class="header-anchor">#</a></h2><h3><span id="an-zhuang">安装</span><a href="#an-zhuang" class="header-anchor">#</a></h3><p>安装 Hexo 相当简单。然而在安装前，您必须检查电脑中是否已安装下列应用程序：</p>
<ul>
<li><a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">Node.js</a></li>
<li><a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a></li>
</ul>
<p>如果您的电脑中已经安装上述必备程序，那么恭喜您！接下来只需要使用 npm 即可完成 Hexo 的安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<h3><span id="shi-ji-an-zhuang-guo-cheng">实际安装过程</span><a href="#shi-ji-an-zhuang-guo-cheng" class="header-anchor">#</a></h3><p>完全没有任何问题。</p>
<p>访问 <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">Node.js 官方网站</a>，直接点击下载最新版的按钮就行。然后安装时一路确定就行了。</p>
<p>（既然都用 GitHub Pages 了，不可能没装 Git 吧。访问 <a href="https://git-scm.com/" target="_blank" rel="noopener">Git 官方网站</a>，下载最新版，安装时同样一路确定。）</p>
<p>执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>在中国，如果直接用 npm 的话，下载速度可能有点慢，在执行 <code>npm install</code> 之前改一下 npm 设置就行了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org -g</span><br></pre></td></tr></table></figure>
<p>然后再</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init myblog</span><br><span class="line"><span class="built_in">cd</span> myblog</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>访问 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a>，我已经看到了成果。</p>
<h3><span id="xie-wen-zhang">写文章</span><a href="#xie-wen-zhang" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post <span class="string">"New Blog"</span></span><br></pre></td></tr></table></figure>
<p>多么舒服的操作啊。</p>
<p>在 <code>_config.yml</code> 中可以设置默认的文件名格式，可以手动设置成像 Jekyll 那种带日期的文件名。</p>
<h3><span id="github-pages">GitHub Pages</span><a href="#github-pages" class="header-anchor">#</a></h3><p>这个可能是最麻烦的了，因为 GitHub Pages 默认只支持 Jekyll，所以我们必须本地编译成静态网站，然后再用 git 上传到 GitHub。</p>
<p>但是，Hexo 自带 deploy 功能。</p>
<p>先安装 git deployer</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>然后设置一下 <code>_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">git@github.com:ganlvtech/ganlvtech.github.io.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<p>最后执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<p>完美！</p>
<h2><span id="zi-dong-gou-jian">自动构建</span><a href="#zi-dong-gou-jian" class="header-anchor">#</a></h2><p>那么，我怎么像 Jekyll 那样，上传 Markdown 自动编译成 HTML 呢？</p>
<p><a href="https://travis-ci.org/" target="_blank" rel="noopener">Travis CI</a> - Test and Deploy with Confidence</p>
<p>这是一个专门面向 GitHub 的持续集成的工具，可以干很多复杂的东西，部署一个博客简直太简单了。</p>
<h3><span id="cao-zuo-guo-cheng">操作过程</span><a href="#cao-zuo-guo-cheng" class="header-anchor">#</a></h3><p>首先，登录这个网站，直接通过 GitHub 的 OAuth 登录就行了。</p>
<p>然后，在设置中找到这个网站，激活这个网站的持续集成。</p>
<p>接下来，新建一个 <code>.travis.yml</code> 然后填入以下内容</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"node"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line"><span class="attr">  only:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">npm</span> <span class="string">install</span> <span class="bullet">-g</span> <span class="string">hexo-cli</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.name</span> <span class="string">"Ganlv"</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.email</span> <span class="string">"nospam@example.com"</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">sed</span> <span class="bullet">-i</span> <span class="string">"s/git@github.com:/https:\/\/$&#123;__GITHUB_TOKEN__&#125;@github.com\//"</span> <span class="string">_config.yml</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">clone</span> <span class="bullet">-b</span> <span class="string">master</span> <span class="attr">https://github.com/ganlvtech/ganlvtech.github.io.git</span> <span class="string">.deploy_git</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">hexo</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure>
<p>注意，这里需要去 GitHub / Settings / Developer / <a href="https://github.com/settings/tokens" target="_blank" rel="noopener">Personal access tokens</a> 去新建一个拥有 <code>public_repo</code> 权限的 <code>token</code>。然后在 Travis CI 中这个项目的设置中添加一条 <code>__GITHUB_TOKEN__</code> 的环境变量。</p>
<p>最后把原始的代码 push 到 dev 分支就可以了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git branch -m master dev</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"Use Travis-CI"</span></span><br><span class="line">git remote add origin git@github.com:ganlvtech/ganlvtech.github.io.git</span><br><span class="line">git push origin dev</span><br></pre></td></tr></table></figure>
<p>Travis 会根据设置自动为我们构建项目，并且推送到 master 分支。</p>
<h3><span id="gai-jin-de-zi-dong-bu-shu">改进的自动部署</span><a href="#gai-jin-de-zi-dong-bu-shu" class="header-anchor">#</a></h3><p>参考另一篇文章 <a href="/2018/09/24/hexo-deploy-vs-travis-pages-provider/">hexo deploy v.s. Travis Pages provider</a></p>
</div>
<footer class="article-footer">
<a data-url="https://ganlvtech.github.io/2018/09/10/jekyll-vs-hexo/" data-id="cjnau2cwp002ow0ozlzu50pao" class="article-share-link">Share</a>
<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ci/">ci</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/comparison/">comparison</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gem/">gem</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/">github</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jekyll/">jekyll</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/">npm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pages/">pages</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ruby/">ruby</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/travis/">travis</a></li></ul>
</footer>
</div>
<nav id="article-nav">
<a href="/2018/09/13/grub-image/" id="article-nav-newer" class="article-nav-link-wrap">
<strong class="article-nav-caption">Newer</strong>
<div class="article-nav-title">
Grub2 添加背景图片
</div>
</a>
<a href="/2018/09/05/build-a-php-site-from-scratch/" id="article-nav-older" class="article-nav-link-wrap">
<strong class="article-nav-caption">Older</strong>
<div class="article-nav-title">从零开始写一个 PHP 网站</div>
</a>
</nav>
</article>
</section>
<aside id="sidebar">
<div class="widget-wrap">
<h3 class="widget-title">标签</h3>
<div class="widget">
<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/PATH/">PATH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/">chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/comparison/">comparison</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/composer/">composer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devtools/">devtools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frontend/">frontend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ftp/">ftp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gem/">gem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gfw/">gfw</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gooreplacer/">gooreplacer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grub/">grub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i18n/">i18n</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/installation/">installation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekyll/">jekyll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/laravel/">laravel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/locale/">locale</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mariadb/">mariadb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pages/">pages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/production/">production</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pure-ftpd/">pure-ftpd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/resource-override/">resource-override</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/">ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/teredo/">teredo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/">test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tls/">tls</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/travis/">travis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tunnel/">tunnel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tutorial/">tutorial</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xx-net/">xx-net</a></li></ul>
</div>
</div>
<div class="widget-wrap">
<h3 class="widget-title">标签云</h3>
<div class="widget tagcloud">
<a href="/tags/PATH/" style="font-size:10px">PATH</a> <a href="/tags/chrome/" style="font-size:15px">chrome</a> <a href="/tags/ci/" style="font-size:15px">ci</a> <a href="/tags/comparison/" style="font-size:10px">comparison</a> <a href="/tags/composer/" style="font-size:10px">composer</a> <a href="/tags/css/" style="font-size:10px">css</a> <a href="/tags/devtools/" style="font-size:10px">devtools</a> <a href="/tags/frontend/" style="font-size:10px">frontend</a> <a href="/tags/ftp/" style="font-size:10px">ftp</a> <a href="/tags/gem/" style="font-size:10px">gem</a> <a href="/tags/gfw/" style="font-size:20px">gfw</a> <a href="/tags/github/" style="font-size:15px">github</a> <a href="/tags/google/" style="font-size:10px">google</a> <a href="/tags/gooreplacer/" style="font-size:10px">gooreplacer</a> <a href="/tags/grub/" style="font-size:10px">grub</a> <a href="/tags/hexo/" style="font-size:15px">hexo</a> <a href="/tags/html/" style="font-size:10px">html</a> <a href="/tags/i18n/" style="font-size:10px">i18n</a> <a href="/tags/installation/" style="font-size:10px">installation</a> <a href="/tags/jekyll/" style="font-size:10px">jekyll</a> <a href="/tags/js/" style="font-size:10px">js</a> <a href="/tags/laravel/" style="font-size:10px">laravel</a> <a href="/tags/linux/" style="font-size:10px">linux</a> <a href="/tags/locale/" style="font-size:10px">locale</a> <a href="/tags/mariadb/" style="font-size:10px">mariadb</a> <a href="/tags/node-js/" style="font-size:15px">node.js</a> <a href="/tags/npm/" style="font-size:15px">npm</a> <a href="/tags/pages/" style="font-size:15px">pages</a> <a href="/tags/php/" style="font-size:10px">php</a> <a href="/tags/production/" style="font-size:10px">production</a> <a href="/tags/pure-ftpd/" style="font-size:10px">pure-ftpd</a> <a href="/tags/resource-override/" style="font-size:10px">resource-override</a> <a href="/tags/ruby/" style="font-size:10px">ruby</a> <a href="/tags/ssl/" style="font-size:15px">ssl</a> <a href="/tags/teredo/" style="font-size:10px">teredo</a> <a href="/tags/test/" style="font-size:10px">test</a> <a href="/tags/tls/" style="font-size:10px">tls</a> <a href="/tags/travis/" style="font-size:15px">travis</a> <a href="/tags/tunnel/" style="font-size:10px">tunnel</a> <a href="/tags/tutorial/" style="font-size:10px">tutorial</a> <a href="/tags/ubuntu/" style="font-size:20px">ubuntu</a> <a href="/tags/xx-net/" style="font-size:10px">xx-net</a>
</div>
</div>
<div class="widget-wrap">
<h3 class="widget-title">归档</h3>
<div class="widget">
<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li></ul>
</div>
</div>
<div class="widget-wrap">
<h3 class="widget-title">最新文章</h3>
<div class="widget">
<ul>
<li>
<a href="/2018/10/15/chrome-local-override/">Chrome Local Override 本地文件替换</a>
</li>
<li>
<a href="/2018/10/08/install-pure-ftpd-enable-tls/">安装 Pure-FTPd 并启用 TLS</a>
</li>
<li>
<a href="/2018/09/28/ubuntu-font-noto-sans-cjk-problem/">Ubuntu Use Noto Sans CJK SC as Default Fallback Font</a>
</li>
<li>
<a href="/2018/09/24/hexo-deploy-vs-travis-pages-provider/">hexo deploy v.s. Travis Pages provider</a>
</li>
<li>
<a href="/2018/09/24/xx-net-teredo-problem/">XX-Net Teredo 问题</a>
</li>
</ul>
</div>
</div>
</aside>
</div>
<footer id="footer">
<div class="outer">
<div id="footer-info" class="inner">
&copy; 2018 Ganlv<br>
Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
</div>
</div>
</footer>
</div>
<nav id="mobile-nav">
<a href="/" class="mobile-nav-link">Home</a>
<a href="/archives" class="mobile-nav-link">Archives</a>
</nav>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script src="/js/BSOD.js"></script>
<script src="/js/script.js"></script>
</div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
